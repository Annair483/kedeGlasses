"use strict";jQuery(function(o){var d=o(".product_item"),u=o(".allCheck"),i=void 0;function n(t){var i=(1*t.parent().next().find("div").text().substring(1)*(1*t.parent().find("input").val())).toFixed(2);t.parent().siblings(".subtotal").find("div").html("￥&nbsp;"+i),e()}function e(){var t=o(".check");d.find(":checked").length==t.length?u.prop("checked","checked"):u.prop("checked",!1);var n=0,e=0;o.each(d.find(":checked"),function(t,i){e+=1*o(i).closest(".cart_product_ul").find(".quantity_input").val(),n+=1*o(i).closest(".cart_product_ul").find(".subtotal div").text().substring(1)}),console.log(d.find(":checked"));var i=o("#settlementQuantity"),c=o("#settlementTotalMoney"),l=o("#settlementPromotionDeduction").html(),a=o("#settlementCouponDeduction").html(),s=o("#settlementRealTotalMoney");i.html(e),c.html(n.toFixed(2)),s.html((c.html()-l-a).toFixed(2)),s.html()<=0&&s.html("0.00")}function c(t,i){var n={oid:o(t).closest(".cart_product_ul").attr("data-oid")},e=Object.assign({},n,i);o.ajax({type:"GET",url:"../api/changeOrder.php",data:e,success:function(t){t||alert("商品修改失败")}})}isLogin(),addGodsAjax("",function(t){console.log(t),o.each(t,function(t,i){var n=' <ul class="clearfix cart_product_ul"  data-oid="'+i.oid+'">\n                            <li class="check">\n                                <input type="checkbox">\n                            </li>\n                            <li class="product">\n                                <div class="item_line_height" ><a href="/1/boshilunmt350.html"><img\n                                            src="../'+i.url+'"\n                                            alt="'+i.godsName+'"></a><label class="product_name"><a href="/1/boshilunmt350.html">'+i.godsName+'</a></label></div>\n                            </li>\n                            <li class="luminosity">\n                            \n                            </li>\n                            <li class="quantity">\n                                <div class="minus" val="id1_1_minus">-</div><input id="input106c2746-c9ef-472c-a2a5-cf3ba1adf54c"\n                                    value="'+i.qty+'" class="quantity_input" type="text" currentnum="1" >\n                                <div class="plus" val="id1_1_plus">+</div>\n                                <div class="quantity_limit"></div>\n                            </li>\n                            <li class="price">\n                                <div class="item_line_height" >￥'+i.price+'</div>\n                            </li>\n                            <li class="subtotal">\n                                <div class="item_line_height" >￥'+(i.qty*i.price).toFixed(2)+'</div>\n                            </li>\n                            <li class="operation">\n                                <div class="item_line_height" >\n                                    <p><a href="javascript:void(0);" identity="fav30458c5c-9eb7-4d9d-a74e-e729ea6fd189">加入收藏夹</a></p>\n                                    <p><a href="javascript:void(0);" class="delBtn">删除</a></p>\n                                </div>\n                            </li>\n                        </ul>';d.append(n)}),i=o(".cart_product_ul"),console.log(i),i.on("click",".plus",function(){var t=o(this).prev().val();100<=++t&&(t=100),o(this).prev().val(t),c(this,{qty:t}),n(o(this)),e()}),i.on("click",".minus",function(){var t=o(this).next().val();--t<=1&&(t=1),o(this).next().val(t),c(this,{qty:t}),n(o(this)),e()}),i.on("click",".delBtn",function(){o(this).closest(i).remove(),c(this,{del:1}),e()}),i.on("change",".quantity_input",function(){var t=o(this).val();c(this,{qty:t}),n(o(this)),e()}),i.on("click",":checkbox",function(){e()}),u.on("click",function(){i.find(":checkbox").prop("checked",o(this).prop("checked")),e()})})});